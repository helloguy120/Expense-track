<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expense & Sales Tracker V5</title>

<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

</head>
<body>

<!-- LOGIN PAGE -->
<div id="loginPage" class="centerBox">
    <h2>Login</h2>
    <input type="password" id="passwordInput" placeholder="Enter Password">
    <button onclick="login()">Login</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="container" style="display:none">

    <!-- HEADER -->
    <header class="topBar">
        <h1>Expense & Sales Dashboard</h1>
        <div class="topButtons">
            <button onclick="backupData()">Backup</button>
            <button onclick="exportExcel()">Export</button>
        </div>
    </header>

    <!-- STAT CARDS -->
    <section class="statsGrid">
        <div class="statCard">
            <h3>Total Income</h3>
            <p id="income">0</p>
        </div>
        <div class="statCard">
            <h3>Total Expense</h3>
            <p id="expense">0</p>
        </div>
        <div class="statCard">
            <h3>Net Profit</h3>
            <p id="profit">0</p>
        </div>
    </section>

    <!-- PRODUCT MANAGEMENT -->
    <section class="productSection">
        <h2>Products</h2>
        <div class="productHeader">
            <input type="text" id="productSearch" placeholder="Search by ID or name" oninput="searchProducts()">
            <button onclick="openAddProductModal()">+ Add Product</button>
        </div>
        <div id="productList" class="productList">
            <!-- Dynamic product cards will appear here -->
        </div>
    </section>

    <!-- EXPENSE PLAYLISTS -->
    <section class="expenseSection">
        <h2>Monthly Expenses</h2>
        <div class="playlistHeader">
            <button onclick="openAddExpenseModal()">+ Add Expense</button>
        </div>
        <div id="expensePlaylists" class="playlistContainer">
            <!-- Monthly folders dynamically -->
        </div>
    </section>

    <!-- CHARTS -->
    <section class="chartSection">
        <div class="chartCard">
            <canvas id="salesChart"></canvas>
        </div>
        <div class="chartCard">
            <canvas id="categoryChart"></canvas>
        </div>
    </section>

</div>

<!-- MODALS -->
<div id="productModal" class="modal">
    <div class="modalContent">
        <h3 id="productModalTitle">Add Product</h3>
        <input type="text" id="productName" placeholder="Product Name">
        <input type="text" id="productId" placeholder="Product ID">
        <input type="text" id="productCategory" placeholder="Category (optional)">
        <input type="text" id="productSupplier" placeholder="Supplier Link">
        <input type="number" id="productCost" placeholder="Cost">
        <div class="modalButtons">
            <button onclick="saveProduct()">Save</button>
            <button onclick="closeProductModal()">Cancel</button>
        </div>
    </div>
</div>

<div id="saleModal" class="modal">
    <div class="modalContent">
        <h3>Record Sale</h3>
        <p id="saleProductName"></p>
        <input type="number" id="saleQuantity" placeholder="Quantity Sold">
        <input type="number" id="salePrice" placeholder="Selling Price per unit">
        <input type="number" id="saleShipping" placeholder="Shipping Charged">
        <input type="number" id="saleRefund" placeholder="Refund (if any)">
        <div class="modalButtons">
            <button onclick="saveSale()">Save Sale</button>
            <button onclick="closeSaleModal()">Cancel</button>
        </div>
    </div>
</div>

<div id="expenseModal" class="modal">
    <div class="modalContent">
        <h3>Add Expense</h3>
        <input type="text" id="expenseName" placeholder="Expense Name">
        <input type="number" id="expenseAmount" placeholder="Amount">
        <input type="text" id="expenseCategory" placeholder="Category">
        <input type="date" id="expenseDate">
        <input type="text" id="expenseNotes" placeholder="Notes (optional)">
        <div class="modalButtons">
            <button onclick="saveExpense()">Save Expense</button>
            <button onclick="closeExpenseModal()">Cancel</button>
        </div>
    </div>
</div>

<script type="module" src="firebase.js"></script>
<script type="module" src="app.js"></script>

</body>
</html>
